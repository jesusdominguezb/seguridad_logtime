#! /bin/bash
  
if [ "$1" == "-h" ]
then
    echo "Soy ayuda"

elif [ "$#" -gt "1" ]
then      
    if [ "$1" == "-f" ]
    then  
        echo "Usuarios     Tiempo" 
        cat $2 |tr -s " " > salida.txt
        cut -d " " -f 1,10 salida.txt | awk '{ if ($1 != "wtmp" && $1 != "" && $1 != "reboot") printf "\n%s %s", $1, $2;}'
	
    elif [ "$1" == "-u" ]
    then
        echo "Datos       |     Tiempo (hh:mm:ss)"
	grep $2 $4 |tr -s " " > salida.txt
        s1=$(cut -d " " -f 1 salida.txt | uniq) 
        cut -d " " -f 10 salida.txt | sed -e's/^(//' -e 's/)$//' > resul.txt
	hora=$(cut -c 1-2 resul.txt | paste -s -d + - | bc)
	min=$(cut -c 4-5 resul.txt | paste -s -d + - | bc)

	seg=$(((hora*3600)+(min*60)))
	s2=$(echo $seg | awk '{printf "%d:%02d:%02d", $1/3600, ($1/60)%60, $1%60}')        
        #s2=$(sed 's/:/./g' resul.txt | paste -s -d + - | bc)
        echo "$s1     |       $s2"

	
    fi 
fi  

